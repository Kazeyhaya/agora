[hidden] { display: none !important; }

:root{
  --orkut-pink:#e057a1;
  --orkut-blue:#4da3ff;
  --orkut-soft:#f7f2ff;
  --discord-dark:#2b2d31;
  --discord-darker:#1e1f22;
  --discord-panel:#313338;
  --text-primary:#ffffff;
  --text-secondary:#b5bac1;
  --accent:#6d9cff;
  --success:#4caf50;
  --danger:#ef5350;
  --bg:#1a1b1e;
  --shadow: 0 8px 24px rgba(0,0,0,.25);
  --radius: 14px;
}

*{box-sizing:border-box;margin:0;padding:0}

body{
  font-family: "Segoe UI",system-ui,-apple-system,Roboto,Arial,sans-serif;
  background: radial-gradient(1400px 600px at -10% -10%, rgba(224,87,161,.16), transparent 40%),
            radial-gradient(1200px 500px at 110% -10%, rgba(77,163,255,.14), transparent 42%),
            linear-gradient(180deg, #181a1f, #111111 60%);
  color: var(--text-primary);
  height:100dvh; 
  overflow:hidden;
}
a{color:inherit;text-decoration:none}

/* --- Layout Base --- */
.app{
  display:grid;
  height:100dvh; 
  gap:12px;
  padding:12px;
}

/* --- Header --- */
.header{
  grid-area: header;
  background: linear-gradient(135deg, rgba(77,163,255,.14), rgba(224,87,161,.14));
  border:1px solid rgba(255,255,255,.06);
  border-radius: var(--radius);
  display:flex;align-items:center;justify-content:space-between;
  padding:0 16px 0 12px;
  box-shadow: var(--shadow);
  backdrop-filter: blur(6px);
}
.brand{display:flex;align-items:center;gap:12px;font-weight:700;letter-spacing:.4px}
.brand-badge{
  width:36px; height:36px; border-radius:10px;
  background: linear-gradient(135deg, var(--orkut-pink), var(--orkut-blue));
  display:grid; place-items:center; color:#fff; font-weight:900;
  box-shadow: 0 6px 20px rgba(109,156,255,.35);
}
.brand-badge img { width: 100%; height: 100%; object-fit: contain; }
.brand-title{display:flex;gap:8px;align-items:baseline}
.header-actions{display:flex;gap:8px}
.view-tabs{display:flex;gap:8px}
.pill{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.08);color:var(--text-secondary);padding:10px 12px;border-radius:12px;cursor:pointer;transition:.2s;display:flex;align-items:center;gap:8px}
.pill:hover{background:rgba(255,255,255,.1);color:#fff}
.pill.active{background:rgba(255,255,255,.16);color:#fff}

/* --- Sidebar (Servidores) --- */
#home-btn { background: #1e1f22; }
#home-btn:hover { border-radius: 50%; }
#home-btn.active { background: #1e1f22; border: 1px solid var(--orkut-blue); border-radius: 50%; }
.divider{width:24px;height:2px;background:rgba(255,255,255,.08);border-radius:1px;margin:8px 0}
.add-btn{width:52px;height:52px;border-radius:50%;border:1px dashed rgba(255,255,255,.18);color:var(--text-secondary);display:grid;place-items:center;cursor:pointer;transition:.2s;background: transparent}
.add-btn:hover{color:#fff;border-color:rgba(255,255,255,.4)}

#joined-servers-list { display: flex; flex-direction: column; align-items: center; gap: 10px; }
.servers{grid-area: servers;background: var(--discord-darker);border:1px solid rgba(255,255,255,.06);border-radius: var(--radius);padding:10px 8px;display:flex;flex-direction:column;align-items:center;gap:10px;box-shadow: var(--shadow)}
.server{width:52px;height:52px;border-radius: 50%;display:grid;place-items:center;background:linear-gradient(135deg, rgba(224,87,161,.22), rgba(77,163,255,.22));border:1px solid rgba(255,255,255,.08);cursor:pointer;transition: .2s transform, .2s background, .2s border-radius;position:relative;overflow:hidden}
.server:hover{transform: translateY(-2px);border-radius: 50%;}
.server.active{background:linear-gradient(135deg, var(--orkut-pink), var(--orkut-blue))}
.server .emoji{font-size:22px;filter:drop-shadow(0 2px 4px rgba(0,0,0,.4))}

/* --- Canais --- */
.channels{grid-area: channels;background: var(--discord-panel);border:1px solid rgba(255,255,255,.06);border-radius: var(--radius);padding:12px;display:flex;flex-direction:column;gap:10px;box-shadow: var(--shadow);min-width:240px}
.community-card{background: linear-gradient(180deg, rgba(224,87,161,.14), rgba(109,156,255,.1));border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:12px;display:flex;gap:10px;align-items:center}
.community-avatar{width:36px;height:36px;border-radius:10px;display:grid;place-items:center;background: radial-gradient(80% 80% at 20% 20%, #fff2, transparent 60%), linear-gradient(135deg, var(--orkut-pink), var(--orkut-blue));font-weight:800}
.community-info{display:flex;flex-direction:column;line-height:1.2}
.community-name{font-weight:700}
.community-sub{color:var(--text-secondary);font-size:.9rem}
.channel{display:flex;align-items:center;gap:8px;padding:8px 10px;margin:2px 0;border-radius:10px;cursor:pointer;transition:.15s;background:transparent;color:var(--text-secondary)}
.channel.active,.channel:hover{background:rgba(255,255,255,.06);color:#fff}

/* --- Definição dos Grids de Layout --- */
.app.view-home {
  grid-template-columns: 80px 1fr;
  grid-template-rows: 64px 1fr 64px;
  grid-template-areas: "servers header" "servers content" "servers userbar";
}
.app.view-community {
  grid-template-columns: 80px 280px 1fr;
  grid-template-rows: 1fr 64px; 
  grid-template-areas: "servers channels content" "servers userbar content";
}

/* Controla visibilidade das áreas */
.app.view-home .feed, .app.view-home .profile, .app.view-home .explore, .app.view-home .explore-servers, .app.view-home .create-community, .app.view-home .create-topic, .app.view-home .community-content { grid-area: content; }
.app.view-home .channels, .app.view-home .chat { display: none; }
.app.view-community .channels { display: flex; }
.app.view-community .chat, .app.view-community .community-content { display: grid; grid-area: content; }
.app.view-community .header, .app.view-community .feed, .app.view-community .profile, .app.view-community .explore, .app.view-community .explore-servers, .app.view-community .create-community, .app.view-community .create-topic { display: none; }

/* --- Estilos dos Paineis (Feed, Chat, etc) --- */
.chat, .feed, .community-content, .profile, .explore-servers, .create-community, .create-topic {
  background: var(--discord-dark);
  border:1px solid rgba(255,255,255,.06);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  display: grid;
  min-height: 0;
}

/* Rows Específicas */
.chat { grid-template-rows: 56px 1fr auto 74px; } /* Topo, msgs, typing, input */
#view-feed { grid-template-rows: 56px auto 1fr; }
#view-community-topics, #view-explore, #view-community-members { grid-template-rows: 56px 1fr; }
#view-profile { grid-template-rows: 56px 1fr; }
#view-create-community, #view-create-topic { grid-template-rows: auto 1fr; }

/* Topo Padrão */
.feed-top, .chat-top, .profile-top, .explore-servers-top {
  display:flex;align-items:center;justify-content:space-between;padding:0 14px;
  border-bottom:1px solid rgba(255,255,255,.06);
  background: linear-gradient(180deg, rgba(255,255,255,.03), transparent);
  border-top-left-radius: var(--radius);border-top-right-radius: var(--radius);
  min-height: 56px;
}

/* Elementos de UI */
.composer-feed{display:flex;gap:10px;padding:12px;border-bottom:1px solid rgba(255,255,255,.06)}
.input{flex:1;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);border-radius:12px;padding:14px 12px;color:#fff;outline:none;transition:.2s}
.input:focus{border-color: rgba(109,156,255,.6);box-shadow:0 0 0 3px rgba(109,156,255,.15)}
.send{background: linear-gradient(135deg, var(--orkut-pink), var(--orkut-blue));border:none;border-radius:12px;color:#fff;padding:12px 14px;cursor:pointer;font-weight:700;transition:.2s;box-shadow:0 8px 16px rgba(109,156,255,.25)}
.send:hover{transform: translateY(-1px)}

/* Posts */
.posts{overflow:auto;padding:12px;display:flex;flex-direction:column;gap:12px;min-height: 0;}
.post{background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:12px;display:grid;grid-template-columns:44px 1fr;gap:10px}
.post-image { display: block; max-width: 100%; max-height: 500px; width: auto; height: auto; border-radius: 12px; margin-top: 10px; border: 1px solid rgba(255,255,255,0.1); cursor: zoom-in; object-fit: contain; background-color: #000; }
.post .meta{margin:0 0 6px 0}
.post-actions{display:flex;gap:8px;margin-top:8px}
.mini-btn{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.08);color:#fff; padding:6px 10px;border-radius:10px;cursor:pointer}
.mini-btn:hover{background:rgba(255,255,255,.1)}
.mini-btn.liked{ background: var(--orkut-pink); border-color: var(--orkut-pink); color: #fff; }
.comments{margin-top:8px;border-top:1px solid rgba(255,255,255,.06);padding-top:8px;display:flex;flex-direction:column;gap:6px}

/* Perfil */
.profile-body{overflow:auto;padding:14px;display:grid;grid-template-columns:300px 1fr;gap:14px}
.card{background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:12px}

/* Capa e Avatar */
.profile-cover {
  width: 100%; height: 150px;
  background-color: var(--discord-darker);
  background-size: cover; background-position: center;
  border-radius: 12px;
  margin-bottom: -40px; position: relative;
  border: 1px solid rgba(255,255,255,0.1);
  overflow: hidden; /* Impede que a imagem vaze */
}
.change-cover-btn { position: absolute; right: 10px; top: 10px; background: rgba(0,0,0,0.6); color: white; padding: 4px 8px; border-radius: 6px; font-size: 0.8rem; cursor: pointer; }
.change-cover-btn:hover { background: rgba(0,0,0,0.8); }
.profile-avatar { width: 80px; height: 80px; border-radius: 50%; border: 4px solid var(--discord-panel); position: relative; z-index: 2; margin-left: 16px; }
.profile-avatar.is-owner { cursor: pointer; }
.profile-avatar.is-owner:hover::after { content: 'Mudar Foto'; position: absolute; bottom: 0; left: 0; width: 100%; padding: 4px 0; font-size: 0.7rem; font-weight: 600; text-align: center; background: rgba(0,0,0,0.6); color: #fff; border-bottom-left-radius: 16px; border-bottom-right-radius: 16px; }

/* Avatar Padrão */
.avatar-display { background-size: cover; background-position: center; background-repeat: no-repeat; overflow: hidden; display: grid; place-items: center; background-color: var(--discord-panel); font-weight: 800; }
.avatar-display img { width: 100%; height: 100%; object-fit: cover; }
.userbar-avatar { width: 36px; height: 36px; border-radius: 10px; }
.post-avatar { width: 44px; height: 44px; border-radius: 12px; }

/* Chat */
.chat-topic{display:flex;align-items:center;gap:10px;min-width:0}
.chat-topic .meta {white-space: nowrap;overflow: hidden;text-overflow: ellipsis;}
.topic-badge{color:#fff;background:linear-gradient(135deg, var(--orkut-pink), var(--orkut-blue));padding:6px 10px;border-radius:999px;font-weight:600}
.icon-btn{width:36px;height:36px;border-radius:10px;display:grid;place-items:center;cursor:pointer;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.08);color:#fff8;transition:.2s}
.icon-btn:hover{color:#fff;background:rgba(255,255,255,.1)}
.messages{padding:14px;overflow:auto;scroll-behavior:smooth;display:flex;flex-direction:column;gap:12px;min-height: 0;}
.msg{display:grid;grid-template-columns: 44px 1fr;gap:10px;align-items:start;animation:fadeIn .3s ease}
.bubble{background: rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:10px 12px}
.composer{display:flex;gap:10px;align-items:center;padding:10px;border-top:1px solid rgba(255,255,255,.06)}
.typing-indicator { font-size: 0.85rem; color: var(--text-secondary); padding: 4px 14px; font-style: italic; display: flex; align-items: center; gap: 6px; min-height: 24px; }
.dots { font-weight: bold; letter-spacing: 2px; animation: blink 1.5s infinite; }
@keyframes blink { 0%, 100% { opacity: 0.2; } 50% { opacity: 1; } }

/* User Bar */
.userbar{grid-area: userbar;background: var(--discord-panel);border:1px solid rgba(255,255,255,.06);border-radius: var(--radius);display:flex;align-items:center;justify-content:space-between;padding:0 12px;box-shadow: var(--shadow)}
.me{display:flex;align-items:center;gap:10px}
.presence{width:12px;height:12px;border-radius:50%;background:var(--success);border:2px solid var(--discord-panel);cursor:pointer;transition:background 0.2s;}
.presence.busy { background: var(--danger); }
.presence.away { background: #faa61a; }
.user-actions{display:flex;gap:8px}
.clickable { cursor: pointer; } .clickable:hover { background: rgba(255, 255, 255, .05); }
.post-username { cursor: pointer; transition: .2s; } .post-username:hover { color: var(--orkut-blue); text-decoration: underline; }
.userbar .me.clickable { border-radius: 8px; transition: .2s background; padding: 4px; margin-left: -4px; }
#userbar-mood-container { border-radius: 4px; padding: 0 4px; margin-left: -4px; transition: .2s background; }

/* Listas (Amigos/Comunidades) */
.community-list { overflow-y: auto; padding: 14px; display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 14px; align-content: start; }
.community-card-explore { background: var(--discord-panel); border:1px solid rgba(255,255,255,.08); border-radius: 12px; padding: 12px; display: flex; gap: 12px; align-items: center; transition: .2s background; }
.community-card-explore:hover { background: rgba(255,255,255,.05); }
.community-card-explore .emoji { font-size: 32px; width: 48px; height: 48px; border-radius: 12px; display: grid; place-items: center; background: rgba(0,0,0,.1); }
.community-card-explore-info { flex: 1; }
.community-card-explore .join-btn { background: var(--success); color: #fff; border: none; padding: 8px 12px; border-radius: 10px; font-weight: 600; cursor: pointer; }
.friends { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 8px; }
.friend-card { background: rgba(255, 255, 255, .06); border: 1px solid rgba(255, 255, 255, .08); border-radius: 10px; padding: 8px; display: flex; align-items: center; gap: 8px; justify-content: flex-start; }
.friend-card strong { cursor: pointer; transition: .2s; } .friend-card strong:hover { color: var(--orkut-blue); }

/* --- LOGIN & MODAL (CORRIGIDO) --- */
.login-overlay {
  position: fixed; top: 0; left: 0; width: 100%; height: 100%;
  display: grid; place-items: center;
  background: rgba(10, 10, 10, 0.5); backdrop-filter: blur(10px);
  z-index: 100; display: none;
}
.login-overlay:not([hidden]) { display: grid; }
.login-card { background: var(--discord-panel); border: 1px solid rgba(255, 255, 255, .08); border-radius: var(--radius); padding: 24px; width: 100%; max-width: 400px; display: flex; flex-direction: column; align-items: center; box-shadow: var(--shadow); }

/* Modal Genérico (FIXED) */
.modal-overlay {
  position: fixed; top: 0; left: 0; width: 100%; height: 100%;
  display: flex; /* Usar Flex para centralizar melhor */
  justify-content: center; align-items: center;
  background: rgba(10, 10, 10, 0.7); backdrop-filter: blur(5px);
  z-index: 10000; /* Z-Index alto para ficar acima de tudo */
  opacity: 0; visibility: hidden; transition: opacity 0.2s, visibility 0.2s;
}
.modal-overlay:not([hidden]) { opacity: 1; visibility: visible; }

.modal-card {
  background: var(--discord-panel);
  border: 1px solid rgba(255, 255, 255, .1);
  border-radius: var(--radius);
  padding: 24px; width: 90%; max-width: 440px;
  display: flex; flex-direction: column;
  box-shadow: 0 10px 40px rgba(0,0,0,0.5);
  transform: scale(0.95); transition: transform 0.2s;
}
.modal-overlay:not([hidden]) .modal-card { transform: scale(1); }

/* Estilo dos Inputs dentro do Modal */
#modal-input, #modal-pass-input {
  background: rgba(0, 0, 0, 0.2);
  border: 1px solid rgba(255, 255, 255, 0.1);
  color: white;
  padding: 10px;
  border-radius: 6px;
  margin-bottom: 15px;
  width: 100%;
  font-family: inherit;
  resize: vertical;
}
#modal-input:focus, #modal-pass-input:focus { border-color: var(--accent); outline: none; }

/* Ratings Grid */
.ratings-display { display: grid; grid-template-columns: 1fr 1fr; gap: 8px 12px; margin-bottom: 15px; }
.rating-item { display: flex; align-items: center; gap: 6px; font-size: 0.85rem; padding: 4px 8px; background: rgba(255, 255, 255, 0.03); border-radius: 6px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.rating-count { font-weight: 700; color: #fff; margin-left: auto; }
.rating-item.negative-stat .rating-count { color: var(--danger); }
.rating-item.negative-stat .rating-label { color: #ff9999; }

.vote-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin-top: 8px; }
#ratings-vote-container .mini-btn { background: var(--discord-dark); height: 42px; width: 100%; padding: 0; display: flex; align-items: center; justify-content: center; gap: 6px; font-size: 0.85rem; border: 1px solid rgba(255,255,255,.08); }
#ratings-vote-container .mini-btn:hover { background: var(--discord-darker); border-color: var(--accent); color: var(--accent); }
#ratings-vote-container .mini-btn.active { background: var(--accent); border-color: var(--accent); color: #fff; }
#ratings-vote-container .mini-btn.active-negative { background: var(--danger); border-color: var(--danger); color: #fff; }

/* Vibe e Badges */
.vibe-box { margin-top: 8px; padding: 8px 12px; background: rgba(0,0,0,0.2); border-left: 3px solid #fff; border-radius: 8px; font-size: 0.9rem; font-style: italic; display: flex; align-items: center; gap: 8px; }
#profile-badges { display: inline-flex; gap: 4px; vertical-align: middle; }
.user-badge { font-size: 1.1rem; cursor: pointer; transition: transform 0.2s; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3)); user-select: none; }
.user-badge:hover { transform: scale(1.3) rotate(10deg); }

/* Toasts */
#toast-container { position: fixed; bottom: 20px; right: 20px; display: flex; flex-direction: column; gap: 10px; z-index: 9999; pointer-events: none; }
.toast { background: var(--discord-panel); color: #fff; padding: 12px 16px; border-radius: 8px; border-left: 4px solid var(--orkut-blue); box-shadow: 0 4px 12px rgba(0,0,0,0.3); min-width: 250px; animation: slideIn 0.3s ease forwards; pointer-events: auto; display: flex; align-items: center; gap: 10px; }
.toast.success { border-left-color: var(--success); }
.toast.error { border-left-color: var(--danger); }

/* Responsivo */
@media (max-width: 1080px){ .app.view-community { grid-template-columns:72px 1fr; } .app.view-home { grid-template-columns:72px 1fr; } }
@media (max-width: 720px){ .app.view-community, .app.view-home { grid-template-columns:64px 1fr; } .brand-title { display: none; } }
@media (max-width: 640px) {
  .app { padding: 8px; gap: 8px; }
  #btn-mobile-menu, .app.view-community #btn-community-menu { display: grid; }
  .servers { position: fixed; left: 0; top: 0; height: 100dvh; z-index: 50; border-radius: 0; transform: translateX(-100%); transition: transform 0.3s ease; }
  .servers.is-open { transform: translateX(0); box-shadow: 0 0 40px rgba(0,0,0,.5); }
  .app.view-home, .app.view-community { grid-template-columns: 1fr; grid-template-areas: "header" "content" "userbar"; grid-template-rows: 64px 1fr 64px; }
  .channels { min-width: unset; }
  .profile-body { grid-template-columns: 1fr; }
}